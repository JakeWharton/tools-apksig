<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_102) on Mon Nov 21 12:31:53 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ApkSignerEngine (platform/tools/apksig 0.3 API)</title>
<meta name="date" content="2016-11-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="ApkSignerEngine (platform/tools/apksig 0.3 API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ApkSignerEngine.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/android/apksig/ApkSigner.SignerConfig.Builder.html" title="class in com.android.apksig"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.html" title="class in com.android.apksig"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/android/apksig/ApkSignerEngine.html" target="_top">Frames</a></li>
<li><a href="ApkSignerEngine.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.android.apksig</div>
<h2 title="Interface ApkSignerEngine" class="title">Interface ApkSignerEngine</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a>, <a href="http://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/android/apksig/DefaultApkSignerEngine.html" title="class in com.android.apksig">DefaultApkSignerEngine</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">ApkSignerEngine</span>
extends <a href="http://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></pre>
<div class="block">APK signing logic which is independent of how input and output APKs are stored, parsed, and
 generated.

 <p><h3>Operating Model</h3>

 The abstract operating model is that there is an input APK which is being signed, thus producing
 an output APK. In reality, there may be just an output APK being built from scratch, or the input
 APK and the output APK may be the same file. Because this engine does not deal with reading and
 writing files, it can handle all of these scenarios.

 <p>The engine is stateful and thus cannot be used for signing multiple APKs. However, once
 the engine signed an APK, the engine can be used to re-sign the APK after it has been modified.
 This may be more efficient than signing the APK using a new instance of the engine. See
 <a href="#incremental">Incremental Operation</a>.

 <p>In the engine's operating model, a signed APK is produced as follows.
 <ol>
 <li>JAR entries to be signed are output,</li>
 <li>JAR archive is signed using JAR signing, thus adding the so-called v1 signature to the
     output,</li>
 <li>JAR archive is signed using APK Signature Scheme v2, thus adding the so-called v2 signature
     to the output.</li>
 </ol>

 <p>The input APK may contain JAR entries which, depending on the engine's configuration, may or
 may not be output (e.g., existing signatures may need to be preserved or stripped) or which the
 engine will overwrite as part of signing. The engine thus offers <a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntry-java.lang.String-"><code>inputJarEntry(String)</code></a>
 which tells the client whether the input JAR entry needs to be output. This avoids the need for
 the client to hard-code the aspects of APK signing which determine which parts of input must be
 ignored. Similarly, the engine offers <a href="../../../com/android/apksig/ApkSignerEngine.html#inputApkSigningBlock-com.android.apksig.util.DataSource-"><code>inputApkSigningBlock(DataSource)</code></a> to help the
 client avoid dealing with preserving or stripping APK Signature Scheme v2 signature of the input
 APK.

 <p>To use the engine to sign an input APK (or a collection of JAR entries), follow these
 steps:
 <ol>
 <li>Obtain a new instance of the engine -- engine instances are stateful and thus cannot be used
     for signing multiple APKs.</li>
 <li>Locate the input APK's APK Signing Block and provide it to
     <a href="../../../com/android/apksig/ApkSignerEngine.html#inputApkSigningBlock-com.android.apksig.util.DataSource-"><code>inputApkSigningBlock(DataSource)</code></a>.</li>
 <li>For each JAR entry in the input APK, invoke <a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntry-java.lang.String-"><code>inputJarEntry(String)</code></a> to determine
     whether this entry should be output. The engine may request to inspect the entry.</li>
 <li>For each output JAR entry, invoke <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntry-java.lang.String-"><code>outputJarEntry(String)</code></a> which may request to
     inspect the entry.</li>
 <li>Once all JAR entries have been output, invoke <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntries--"><code>outputJarEntries()</code></a> which may request
     that additional JAR entries are output. These entries comprise the output APK's JAR
     signature.</li>
 <li>Locate the ZIP Central Directory and ZIP End of Central Directory sections in the output and
     invoke <a href="../../../com/android/apksig/ApkSignerEngine.html#outputZipSections-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-"><code>outputZipSections(DataSource, DataSource, DataSource)</code></a> which may request that
     an APK Signature Block is inserted before the ZIP Central Directory. The block contains the
     output APK's APK Signature Scheme v2 signature.</li>
 <li>Invoke <a href="../../../com/android/apksig/ApkSignerEngine.html#outputDone--"><code>outputDone()</code></a> to signal that the APK was output in full. The engine will
     confirm that the output APK is signed.</li>
 <li>Invoke <a href="../../../com/android/apksig/ApkSignerEngine.html#close--"><code>close()</code></a> to signal that the engine will no longer be used. This lets the
     engine free any resources it no longer needs.
 </ol>

 <p>Some invocations of the engine may provide the client with a task to perform. The client is
 expected to perform all requested tasks before proceeding to the next stage of signing. See
 documentation of each method about the deadlines for performing the tasks requested by the
 method.

 <p><h3 id="incremental">Incremental Operation</h3></a>

 The engine supports incremental operation where a signed APK is produced, then modified and
 re-signed. This may be useful for IDEs, where an app is frequently re-signed after small changes
 by the developer. Re-signing may be more efficient than signing from scratch.

 <p>To use the engine in incremental mode, keep notifying the engine of changes to the APK through
 <a href="../../../com/android/apksig/ApkSignerEngine.html#inputApkSigningBlock-com.android.apksig.util.DataSource-"><code>inputApkSigningBlock(DataSource)</code></a>, <a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntry-java.lang.String-"><code>inputJarEntry(String)</code></a>,
 <a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntryRemoved-java.lang.String-"><code>inputJarEntryRemoved(String)</code></a>, <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntry-java.lang.String-"><code>outputJarEntry(String)</code></a>,
 and <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntryRemoved-java.lang.String-"><code>outputJarEntryRemoved(String)</code></a>, perform the tasks requested by the engine through
 these methods, and, when a new signed APK is desired, run through steps 5 onwards to re-sign the
 APK.

 <p><h3>Output-only Operation</h3>

 The engine's abstract operating model consists of an input APK and an output APK. However, it is
 possible to use the engine in output-only mode where the engine's <code>input...</code> methods are
 not invoked. In this mode, the engine has less control over output because it cannot request that
 some JAR entries are not output. Nevertheless, the engine will attempt to make the output APK
 signed and will report an error if cannot do so.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://source.android.com/security/apksigning/index.html">Application Signing</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Interface and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.html" title="class in com.android.apksig">ApkSignerEngine.InputJarEntryInstructions</a></span></code>
<div class="block">Instructions about how to handle an input APK's JAR entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.InspectJarEntryRequest.html" title="interface in com.android.apksig">ApkSignerEngine.InspectJarEntryRequest</a></span></code>
<div class="block">Request to inspect the specified JAR entry.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.OutputApkSigningBlockRequest.html" title="interface in com.android.apksig">ApkSignerEngine.OutputApkSigningBlockRequest</a></span></code>
<div class="block">Request to add the specified APK Signing Block to the output APK.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.OutputJarSignatureRequest.html" title="interface in com.android.apksig">ApkSignerEngine.OutputJarSignatureRequest</a></span></code>
<div class="block">Request to add JAR signature (aka v1 signature) to the output APK.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#close--">close</a></span>()</code>
<div class="block">Indicates to this engine that it will no longer be used.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#inputApkSigningBlock-com.android.apksig.util.DataSource-">inputApkSigningBlock</a></span>(<a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;apkSigningBlock)</code>
<div class="block">Indicates to this engine that the input APK contains the provided APK Signing Block.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.html" title="class in com.android.apksig">ApkSignerEngine.InputJarEntryInstructions</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntry-java.lang.String-">inputJarEntry</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)</code>
<div class="block">Indicates to this engine that the specified JAR entry was encountered in the input APK.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.OutputPolicy.html" title="enum in com.android.apksig">ApkSignerEngine.InputJarEntryInstructions.OutputPolicy</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntryRemoved-java.lang.String-">inputJarEntryRemoved</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)</code>
<div class="block">Indicates to this engine that the specified JAR entry was removed from the input.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#outputDone--">outputDone</a></span>()</code>
<div class="block">Indicates to this engine that the signed APK was output.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code><a href="../../../com/android/apksig/ApkSignerEngine.OutputJarSignatureRequest.html" title="interface in com.android.apksig">ApkSignerEngine.OutputJarSignatureRequest</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntries--">outputJarEntries</a></span>()</code>
<div class="block">Indicates to this engine that all JAR entries have been output.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../com/android/apksig/ApkSignerEngine.InspectJarEntryRequest.html" title="interface in com.android.apksig">ApkSignerEngine.InspectJarEntryRequest</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntry-java.lang.String-">outputJarEntry</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)</code>
<div class="block">Indicates to this engine that the specified JAR entry was output.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntryRemoved-java.lang.String-">outputJarEntryRemoved</a></span>(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)</code>
<div class="block">Indicates to this engine that the specified JAR entry was removed from the output.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="../../../com/android/apksig/ApkSignerEngine.OutputApkSigningBlockRequest.html" title="interface in com.android.apksig">ApkSignerEngine.OutputApkSigningBlockRequest</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/android/apksig/ApkSignerEngine.html#outputZipSections-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-">outputZipSections</a></span>(<a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;zipEntries,
                 <a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;zipCentralDirectory,
                 <a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;zipEocd)</code>
<div class="block">Indicates to this engine that the ZIP sections comprising the output APK have been output.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="inputApkSigningBlock-com.android.apksig.util.DataSource-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputApkSigningBlock</h4>
<pre>void&nbsp;inputApkSigningBlock(<a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;apkSigningBlock)
                   throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                          <a href="../../../com/android/apksig/apk/ApkFormatException.html" title="class in com.android.apksig.apk">ApkFormatException</a>,
                          <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the input APK contains the provided APK Signing Block. The
 block may contain signatures of the input APK, such as APK Signature Scheme v2 signatures.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>apkSigningBlock</code> - APK signing block of the input APK. The provided data source is
        guaranteed to not be used by the engine after this method terminates.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an I/O error occurs while reading the APK Signing Block</dd>
<dd><code><a href="../../../com/android/apksig/apk/ApkFormatException.html" title="class in com.android.apksig.apk">ApkFormatException</a></code> - if the APK Signing Block is malformed</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this engine is closed</dd>
</dl>
</li>
</ul>
<a name="inputJarEntry-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputJarEntry</h4>
<pre><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.html" title="class in com.android.apksig">ApkSignerEngine.InputJarEntryInstructions</a>&nbsp;inputJarEntry(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)
                                                 throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the specified JAR entry was encountered in the input APK.

 <p>When an input entry is updated/changed, it's OK to not invoke
 <a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntryRemoved-java.lang.String-"><code>inputJarEntryRemoved(String)</code></a> before invoking this method.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>instructions about how to proceed with this entry</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this engine is closed</dd>
</dl>
</li>
</ul>
<a name="outputJarEntry-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputJarEntry</h4>
<pre><a href="../../../com/android/apksig/ApkSignerEngine.InspectJarEntryRequest.html" title="interface in com.android.apksig">ApkSignerEngine.InspectJarEntryRequest</a>&nbsp;outputJarEntry(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)
                                               throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the specified JAR entry was output.

 <p>It is unnecessary to invoke this method for entries added to output by this engine (e.g.,
 requested by <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntries--"><code>outputJarEntries()</code></a>) provided the entries were output with exactly the
 data requested by the engine.

 <p>When an already output entry is updated/changed, it's OK to not invoke
 <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntryRemoved-java.lang.String-"><code>outputJarEntryRemoved(String)</code></a> before invoking this method.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>request to inspect the entry or <code>null</code> if the engine does not need to inspect
         the entry. The request must be fulfilled before <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntries--"><code>outputJarEntries()</code></a> is
         invoked.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this engine is closed</dd>
</dl>
</li>
</ul>
<a name="inputJarEntryRemoved-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputJarEntryRemoved</h4>
<pre><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.OutputPolicy.html" title="enum in com.android.apksig">ApkSignerEngine.InputJarEntryInstructions.OutputPolicy</a>&nbsp;inputJarEntryRemoved(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)
                                                                     throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the specified JAR entry was removed from the input. It's safe
 to invoke this for entries for which <a href="../../../com/android/apksig/ApkSignerEngine.html#inputJarEntry-java.lang.String-"><code>inputJarEntry(String)</code></a> hasn't been invoked.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>output policy of this JAR entry. The policy indicates how this input entry affects
         the output APK. The client of this engine should use this information to determine
         how the removal of this input APK's JAR entry affects the output APK.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this engine is closed</dd>
</dl>
</li>
</ul>
<a name="outputJarEntryRemoved-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputJarEntryRemoved</h4>
<pre>void&nbsp;outputJarEntryRemoved(<a href="http://docs.oracle.com/javase/8/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;entryName)
                    throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the specified JAR entry was removed from the output. It's safe
 to invoke this for entries for which <a href="../../../com/android/apksig/ApkSignerEngine.html#outputJarEntry-java.lang.String-"><code>outputJarEntry(String)</code></a> hasn't been invoked.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if this engine is closed</dd>
</dl>
</li>
</ul>
<a name="outputJarEntries--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputJarEntries</h4>
<pre><a href="../../../com/android/apksig/ApkSignerEngine.OutputJarSignatureRequest.html" title="interface in com.android.apksig">ApkSignerEngine.OutputJarSignatureRequest</a>&nbsp;outputJarEntries()
                                                    throws <a href="../../../com/android/apksig/apk/ApkFormatException.html" title="class in com.android.apksig.apk">ApkFormatException</a>,
                                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a>,
                                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/security/InvalidKeyException.html?is-external=true" title="class or interface in java.security">InvalidKeyException</a>,
                                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/security/SignatureException.html?is-external=true" title="class or interface in java.security">SignatureException</a>,
                                                           <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that all JAR entries have been output.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>request to add JAR signature to the output or <code>null</code> if there is no need to add
         a JAR signature. The request will contain additional JAR entries to be output. The
         request must be fulfilled before
         <a href="../../../com/android/apksig/ApkSignerEngine.html#outputZipSections-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-"><code>outputZipSections(DataSource, DataSource, DataSource)</code></a> is invoked.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="../../../com/android/apksig/apk/ApkFormatException.html" title="class in com.android.apksig.apk">ApkFormatException</a></code> - if the APK is malformed in a way which is preventing this engine
         from producing a valid signature. For example, if the engine uses the provided
         <code>META-INF/MANIFEST.MF</code> as a template and the file is malformed.</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a></code> - if a signature could not be generated because a required
         cryptographic algorithm implementation is missing</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/security/InvalidKeyException.html?is-external=true" title="class or interface in java.security">InvalidKeyException</a></code> - if a signature could not be generated because a signing key is
         not suitable for generating the signature</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/security/SignatureException.html?is-external=true" title="class or interface in java.security">SignatureException</a></code> - if an error occurred while generating a signature</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if there are unfulfilled requests, such as to inspect some JAR
         entries, or if the engine is closed</dd>
</dl>
</li>
</ul>
<a name="outputZipSections-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-com.android.apksig.util.DataSource-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputZipSections</h4>
<pre><a href="../../../com/android/apksig/ApkSignerEngine.OutputApkSigningBlockRequest.html" title="interface in com.android.apksig">ApkSignerEngine.OutputApkSigningBlockRequest</a>&nbsp;outputZipSections(<a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;zipEntries,
                                                               <a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;zipCentralDirectory,
                                                               <a href="../../../com/android/apksig/util/DataSource.html" title="interface in com.android.apksig.util">DataSource</a>&nbsp;zipEocd)
                                                        throws <a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                                               <a href="../../../com/android/apksig/apk/ApkFormatException.html" title="class in com.android.apksig.apk">ApkFormatException</a>,
                                                               <a href="http://docs.oracle.com/javase/8/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a>,
                                                               <a href="http://docs.oracle.com/javase/8/docs/api/java/security/InvalidKeyException.html?is-external=true" title="class or interface in java.security">InvalidKeyException</a>,
                                                               <a href="http://docs.oracle.com/javase/8/docs/api/java/security/SignatureException.html?is-external=true" title="class or interface in java.security">SignatureException</a>,
                                                               <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the ZIP sections comprising the output APK have been output.

 <p>The provided data sources are guaranteed to not be used by the engine after this method
 terminates.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>zipEntries</code> - the section of ZIP archive containing Local File Header records and data of
        the ZIP entries. In a well-formed archive, this section starts at the start of the
        archive and extends all the way to the ZIP Central Directory.</dd>
<dd><code>zipCentralDirectory</code> - ZIP Central Directory section</dd>
<dd><code>zipEocd</code> - ZIP End of Central Directory (EoCD) record</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>request to add an APK Signing Block to the output or <code>null</code> if the output must
         not contain an APK Signing Block. The request must be fulfilled before
         <a href="../../../com/android/apksig/ApkSignerEngine.html#outputDone--"><code>outputDone()</code></a> is invoked.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if an I/O error occurs while reading the provided ZIP sections</dd>
<dd><code><a href="../../../com/android/apksig/apk/ApkFormatException.html" title="class in com.android.apksig.apk">ApkFormatException</a></code> - if the provided APK is malformed in a way which prevents this
         engine from producing a valid signature. For example, if the APK Signing Block
         provided to the engine is malformed.</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a></code> - if a signature could not be generated because a required
         cryptographic algorithm implementation is missing</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/security/InvalidKeyException.html?is-external=true" title="class or interface in java.security">InvalidKeyException</a></code> - if a signature could not be generated because a signing key is
         not suitable for generating the signature</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/security/SignatureException.html?is-external=true" title="class or interface in java.security">SignatureException</a></code> - if an error occurred while generating a signature</dd>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if there are unfulfilled requests, such as to inspect some JAR
         entries or to output JAR signature, or if the engine is closed</dd>
</dl>
</li>
</ul>
<a name="outputDone--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputDone</h4>
<pre>void&nbsp;outputDone()
         throws <a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Indicates to this engine that the signed APK was output.

 <p>This does not change the output APK. The method helps the client confirm that the current
 output is signed.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if there are unfulfilled requests, such as to inspect some JAR
         entries or to output signatures, or if the engine is closed</dd>
</dl>
</li>
</ul>
<a name="close--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>void&nbsp;close()</pre>
<div class="block">Indicates to this engine that it will no longer be used. Invoking this on an already closed
 engine is OK.

 <p>This does not change the output APK. For example, if the output APK is not yet fully
 signed, it will remain so after this method terminates.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true#close--" title="class or interface in java.lang">close</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/8/docs/api/java/lang/AutoCloseable.html?is-external=true" title="class or interface in java.lang">AutoCloseable</a></code></dd>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true#close--" title="class or interface in java.io">close</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/8/docs/api/java/io/Closeable.html?is-external=true" title="class or interface in java.io">Closeable</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ApkSignerEngine.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/android/apksig/ApkSigner.SignerConfig.Builder.html" title="class in com.android.apksig"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/android/apksig/ApkSignerEngine.InputJarEntryInstructions.html" title="class in com.android.apksig"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/android/apksig/ApkSignerEngine.html" target="_top">Frames</a></li>
<li><a href="ApkSignerEngine.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2016. All rights reserved.</small></p>
</body>
</html>
